<!-- Modal -->
<div class="modal fade bg-white" id="templatemo_search" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="w-100 pt-1 mb-5 text-right">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form action="" method="get" class="modal-content modal-body border-0 p-0">
            <div class="input-group mb-2">
                <input type="text" class="form-control" id="inputModalSearch" name="q" placeholder="Search ...">
                <button type="submit" class="input-group-text bg-success text-light">
                    <i class="fa fa-fw fa-search text-white"></i>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Start Premium Hero Banner -->
<section class="premium-hero-banner">
    <div id="premium-hero-carousel" class="carousel slide premium-carousel" data-bs-ride="carousel">
        <ol class="carousel-indicators premium-indicators">
            <li data-bs-target="#premium-hero-carousel" data-bs-slide-to="0" class="active"></li>
            <li data-bs-target="#premium-hero-carousel" data-bs-slide-to="1"></li>
            <li data-bs-target="#premium-hero-carousel" data-bs-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <!-- Slide 1: Premium Sports Shoes -->
            <div class="carousel-item active">
                <div class="premium-slide">
                    <div class="container-fluid h-100">
                        <div class="row h-100">
                            <!-- Left Side: Product Showcase -->
                            <div class="col-lg-6 premium-product-section">
                                <div class="product-showcase">
                                    <div class="product-image-container">
                                        <img class="product-main-image" src="./View/assets/img/upload/slide_2_img.webp" alt="Premium Sports Shoes">
                                        <div class="product-glow-effect"></div>
                                        <div class="floating-elements">
                                            <div class="floating-element element-1"></div>
                                            <div class="floating-element element-2"></div>
                                            <div class="floating-element element-3"></div>
                                        </div>
                                    </div>
                                    <div class="product-info-overlay">
                                        <div class="product-badge">
                                            <span class="badge-text">NEW ARRIVAL</span>
                                        </div>
                                        <div class="product-model">
                                            <span class="model-series">MERCURIAL</span>
                                            <span class="model-name">VAPOR</span>
                                            <span class="model-version">ELITE 9</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right Side: Content & Branding -->
                            <div class="col-lg-6 premium-content-section">
                                <div class="content-wrapper">
                                    <div class="brand-tagline">
                                        <span class="tagline-text">WHEN YOU BELIEVE</span>
                                    </div>
                                    <h1 class="premium-title">
                                        <span class="title-main">Giày Thể Thao</span>
                                        <span class="title-highlight">Cao Cấp</span>
                                    </h1>
                                    <p class="premium-description">
                                        Khám phá bộ sưu tập giày thể thao mới nhất với công nghệ tiên tiến và thiết kế hiện đại. 
                                        Trải nghiệm sự thoải mái và hiệu suất vượt trội.
                                    </p>
                                    <div class="premium-actions">
                                        <a href="index.php?action=shop" class="btn-premium btn-primary-premium">
                                            <i class="fas fa-shopping-bag"></i>
                                            <span>Mua ngay</span>
                                        </a>
                                        <a href="#products" class="btn-premium btn-secondary-premium">
                                            <i class="fas fa-eye"></i>
                                            <span>Xem sản phẩm</span>
                                        </a>
                                    </div>
                                    <div class="premium-features">
                                        <div class="feature-item">
                                            <i class="fas fa-check-circle"></i>
                                            <span>Chất lượng cao cấp</span>
                                        </div>
                                        <div class="feature-item">
                                            <i class="fas fa-shipping-fast"></i>
                                            <span>Giao hàng nhanh</span>
                                        </div>
                                        <div class="feature-item">
                                            <i class="fas fa-shield-alt"></i>
                                            <span>Bảo hành chính hãng</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Slide 2: Technology Focus -->
            <div class="carousel-item">
                <div class="premium-slide">
                    <div class="container-fluid h-100">
                        <div class="row h-100">
                            <div class="col-lg-6 premium-product-section">
                                <div class="product-showcase">
                                    <div class="product-image-container">
                                        <img class="product-main-image" src="./View/assets/img/upload/slide_8_img.webp" alt="Advanced Technology">
                                        <div class="product-glow-effect"></div>
                                        <div class="floating-elements">
                                            <div class="floating-element element-1"></div>
                                            <div class="floating-element element-2"></div>
                                            <div class="floating-element element-3"></div>
                                        </div>
                                    </div>
                                    <div class="product-info-overlay">
                                        <div class="product-badge">
                                            <span class="badge-text">TECHNOLOGY</span>
                                        </div>
                                        <div class="product-model">
                                            <span class="model-series">ADVANCED</span>
                                            <span class="model-name">PERFORMANCE</span>
                                            <span class="model-version">PRO MAX</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 premium-content-section">
                                <div class="content-wrapper">
                                    <div class="brand-tagline">
                                        <span class="tagline-text">PERFORMANCE FIRST</span>
                                    </div>
                                    <h1 class="premium-title">
                                        <span class="title-main">Công Nghệ</span>
                                        <span class="title-highlight">Tiên Tiến</span>
                                    </h1>
                                    <p class="premium-description">
                                        Sử dụng công nghệ mới nhất trong ngành giày thể thao. 
                                        Thiết kế tối ưu cho hiệu suất và sự thoải mái tối đa.
                                    </p>
                                    <div class="premium-actions">
                                        <a href="index.php?action=shop" class="btn-premium btn-primary-premium">
                                            <i class="fas fa-shopping-bag"></i>
                                            <span>Mua ngay</span>
                                        </a>
                                        <a href="#products" class="btn-premium btn-secondary-premium">
                                            <i class="fas fa-eye"></i>
                                            <span>Xem sản phẩm</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Slide 3: Heritage & Innovation -->
            <div class="carousel-item">
                <div class="premium-slide">
                    <div class="container-fluid h-100">
                        <div class="row h-100">
                            <div class="col-lg-6 premium-product-section">
                                <div class="product-showcase">
                                    <div class="product-image-container">
                                        <img class="product-main-image" src="./View/assets/img/upload/kham-pha-lich-su-cac-logo3.jpg" alt="Heritage Collection">
                                        <div class="product-glow-effect"></div>
                                        <div class="floating-elements">
                                            <div class="floating-element element-1"></div>
                                            <div class="floating-element element-2"></div>
                                            <div class="floating-element element-3"></div>
                                        </div>
                                    </div>
                                    <div class="product-info-overlay">
                                        <div class="product-badge">
                                            <span class="badge-text">HERITAGE</span>
                                        </div>
                                        <div class="product-model">
                                            <span class="model-series">LEGACY</span>
                                            <span class="model-name">COLLECTION</span>
                                            <span class="model-version">2024</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 premium-content-section">
                                <div class="content-wrapper">
                                    <div class="brand-tagline">
                                        <span class="tagline-text">TRADITION MEETS INNOVATION</span>
                                    </div>
                                    <h1 class="premium-title">
                                        <span class="title-main">Truyền Thống</span>
                                        <span class="title-highlight">& Đổi Mới</span>
                                    </h1>
                                    <p class="premium-description">
                                        Kết hợp giữa truyền thống lâu đời và công nghệ hiện đại. 
                                        Tạo ra những sản phẩm hoàn hảo cho thế hệ mới.
                                    </p>
                                    <div class="premium-actions">
                                        <a href="index.php?action=shop" class="btn-premium btn-primary-premium">
                                            <i class="fas fa-shopping-bag"></i>
                                            <span>Mua ngay</span>
                                        </a>
                                        <a href="#products" class="btn-premium btn-secondary-premium">
                                            <i class="fas fa-eye"></i>
                                            <span>Xem sản phẩm</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation Controls -->
        <a class="carousel-control-prev premium-control" href="#premium-hero-carousel" role="button" data-bs-slide="prev">
            <div class="control-icon">
                <i class="fas fa-chevron-left"></i>
            </div>
        </a>
        <a class="carousel-control-next premium-control" href="#premium-hero-carousel" role="button" data-bs-slide="next">
            <div class="control-icon">
                <i class="fas fa-chevron-right"></i>
            </div>
        </a>
    </div>
</section>
<!-- End Premium Hero Banner -->

<!-- <h2 class="chophighlight text-center">Chào mừng bạn đã đến với cửa hàng</h2> -->

<!-- Featured Athletes Section -->
<section class="featured-athletes py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="athlete-card">
                    <div class="athlete-image">
                        <img src="View/assets/img/upload/messi.jpg" alt="Lionel Messi" class="img-fluid">
                        <div class="athlete-overlay">
                            <div class="athlete-info">
                                <h3 class="athlete-name">Lionel Messi</h3>
                                <p class="athlete-title">Đại sứ thương hiệu</p>
                                <p class="athlete-quote">"Chất lượng và hiệu suất là điều tôi tìm kiếm trong mỗi đôi giày"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="athlete-card">
                    <div class="athlete-image">
                        <img src="View/assets/img/upload/neymar.webp" alt="Neymar Jr" class="img-fluid">
                        <div class="athlete-overlay">
                            <div class="athlete-info">
                                <h3 class="athlete-name">Neymar Jr</h3>
                                <p class="athlete-title">Đại sứ thương hiệu</p>
                                <p class="athlete-quote">"Phong cách và hiệu suất kết hợp hoàn hảo trong từng sản phẩm"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Products Section -->
<section id="products" class="products-section py-5">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h2 class="section-title">Sản Phẩm Giảm Giá Nhiều Nhất</h2>
            <p class="section-subtitle">Khám phá 10 sản phẩm có mức giảm giá cao nhất với thiết kế hiện đại và chất lượng vượt trội</p>
        </div>
        
        <div class="products-filter mb-4">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="filter-tabs">
                        <button class="filter-btn active" data-filter="all">Giảm giá nhiều nhất</button>
                        <button class="filter-btn" data-filter="futsal">Giày Futsal</button>
                        <button class="filter-btn" data-filter="football">Giày Cỏ nhân tạo</button>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="sort-controls">
                        <label class="sort-label">Sắp xếp theo:</label>
                        <select id="arrange_select" class="form-select modern-select" aria-label="Default select example">
                            <option <?php echo ((isset($_GET['act']) && $_GET['act'] == 'home') || (isset($_GET['action']) && $_GET['action'] == 'home')) ? 'selected' : ''; ?> value="0">Giảm giá nhiều nhất</option>
                            <option <?php echo isset($_GET['act']) && $_GET['act'] == 'futsal' ? 'selected' : ''; ?> value="1">Giày Futsal</option>
                            <option <?php echo isset($_GET['act']) && $_GET['act'] == 'football' ? 'selected' : ''; ?> value="2">Giày Cỏ Nhân Tạo</option>
                            <option <?php echo isset($_GET['act']) && $_GET['act'] == 'decrease' ? 'selected' : ''; ?> value="3">Giá: giảm dần</option>
                            <option <?php echo isset($_GET['act']) && $_GET['act'] == 'ascending' ? 'selected' : ''; ?> value="4">Giá: tăng dần</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="products-grid">
            <div class="row g-4">
                <?php
                $product = new Product();
                if (isset($_GET['act']) && $_GET['act'] == 'futsal') {
                    $result_product = $product->getAll_ShoesFutsal();
                } else if (isset($_GET['act']) && $_GET['act'] == 'football') {
                    $result_product = $product->getAll_ShoesFootball();
                } else if (isset($_GET['act']) && $_GET['act'] == 'decrease') {
                    // Paginate
                    $count_product = $product->getPrice_Decrease()->rowCount();
                    $page = (isset($_GET['page'])) ? $_GET['page'] : 1;
                    $all_page = ceil($count_product / 8);
                    $prevPage = max(1, $page - 1);
                    $nextPage = min($page + 1, $all_page);
                    $start = ($page - 1) * 8;
                    $result_product = $product->getPrice_DecreaseLimit($start, 8);
                } else if (isset($_GET['act']) && $_GET['act'] == 'ascending') {
                    // Paginate
                    $count_product = $product->getPrice_Ascending()->rowCount();
                    $page = (isset($_GET['page'])) ? $_GET['page'] : 1;
                    $all_page = ceil($count_product / 8);
                    $prevPage = max(1, $page - 1);
                    $nextPage = min($page + 1, $all_page);
                    $start = ($page - 1) * 8;
                    $result_product = $product->getPrice_AscendingLimit($start, 8);
                } else {
                    // Hiển thị 10 sản phẩm giảm giá nhiều nhất cho trang chủ
                    $result_product = $product->getTopDiscountProducts(10);
                    // Không cần pagination cho trường hợp này
                    $page = 1;
                    $all_page = 1;
                    $prevPage = 1;
                    $nextPage = 1;
                }
                while ($result_set = $result_product->fetch()):
                    ?>
                    <div class="col-lg-3 col-md-6">
                        <div class="product-card">
                            <div class="product-image">
                                <a href="index.php?action=details_product&id=<?php echo $result_set['id'] ?>">
                                    <img src="View/assets/img/upload/<?php echo $result_set['img'] ?>" 
                                         alt="<?php echo $result_set['name'] ?>" class="img-fluid">
                                </a>
                                <div class="product-overlay">
                                    <div class="product-actions">
                                        <a href="index.php?action=details_product&id=<?php echo $result_set['id'] ?>" 
                                           class="btn btn-primary btn-sm">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <button class="btn btn-outline-light btn-sm add-to-cart" 
                                                data-product-id="<?php echo $result_set['id'] ?>">
                                            <i class="fas fa-shopping-cart"></i>
                                        </button>
                                    </div>
                                </div>
                                <?php if ($result_set['discount'] > 0): ?>
                                    <div class="product-badge">
                                        <span class="badge bg-danger">-<?php 
                                            // Sử dụng discount_percentage nếu có, nếu không thì tính toán
                                            if (isset($result_set['discount_percentage'])) {
                                                echo $result_set['discount_percentage'];
                                            } else {
                                                echo round((($result_set['price'] - $result_set['discount']) / $result_set['price']) * 100);
                                            }
                                        ?>%</span>
                                    </div>
                                <?php endif; ?>
                            </div>
                            <div class="product-info">
                                <h5 class="product-name">
                                    <a href="index.php?action=details_product&id=<?php echo $result_set['id'] ?>" 
                                       class="text-decoration-none"><?php echo $result_set['name'] ?></a>
                                </h5>
                                <div class="product-price">
                                    <?php if ($result_set['discount'] > 0): ?>
                                        <span class="current-price"><?php echo number_format($result_set['discount']) ?>đ</span>
                                        <span class="original-price"><?php echo number_format($result_set['price']) ?>đ</span>
                                    <?php else: ?>
                                        <span class="current-price"><?php echo number_format($result_set['price']) ?>đ</span>
                                    <?php endif; ?>
                                </div>
                                <?php
                                $goods_sold = new Goods_sold();
                                $count_quantity_sold = $goods_sold->quantity_sold_product($result_set['name']);
                                ?>
                                <div class="product-stats">
                                    <span class="sold-count">
                                        <i class="fas fa-shopping-bag me-1"></i>
                                        Đã bán: <?php echo ($count_quantity_sold['quantity_sold'] > 0) ? $count_quantity_sold['quantity_sold'] : 0 ?>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                <?php endwhile ?>
            </div>
        </div>
    <!-- Paginate -->
    <?php if (
        isset($_GET['action']) && $_GET['action'] == 'home' && (
            !isset($_GET['act']) || (isset($_GET['act']) && $_GET['act'] == 'home')
        ) && $all_page > 1
    ) { ?>
        <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-3">
            <ul class="pagination">
                <?php if ($page > 1): ?>
                    <li class="page-item"><a class="page-link text-dark"
                            href="index.php?action=home&page=<?php echo $prevPage ?>">Trước</a></li>
                <?php endif; ?>
                <?php for ($i = 1; $i <= $all_page; $i++) { ?>
                    <li class='page-item'><a
                            class='page-link text-dark <?php echo (isset($_GET['page']) && $_GET['page'] == $i) || (!isset($_GET['page']) && $i == 1) ? 'bg-success' : '' ?>'
                            href='index.php?action=home&page=<?php echo $i; ?>'><?php echo $i ?></a></li>
                <?php } ?>
                <?php if ($page < $all_page): ?>
                    <li class="page-item"><a class="page-link text-dark"
                            href="index.php?action=home&page=<?php echo $nextPage ?>">Sau</a></li>
                <?php endif ?>
            </ul>
        </nav>
    <?php } else if (isset($_GET['action']) && $_GET['action'] == 'home' && isset($_GET['act']) && $_GET['act'] == 'decrease') { ?>
            <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-3">
                <ul class="pagination">
                <?php if ($page > 1): ?>
                        <li class="page-item"><a class="page-link text-dark"
                                href="index.php?action=home&act=decrease&page=<?php echo $prevPage ?>">Trước</a></li>
                <?php endif; ?>
                <?php for ($i = 1; $i <= $all_page; $i++) { ?>
                        <li class='page-item'><a
                                class='page-link text-dark <?php echo (isset($_GET['page']) && $_GET['page'] == $i) || (!isset($_GET['page']) && $i == 1) ? 'bg-success' : '' ?>'
                                href='index.php?action=home&act=decrease&page=<?php echo $i; ?>'><?php echo $i; ?></a></li>
                <?php } ?>
                <?php if ($page < $all_page): ?>
                        <li class="page-item"><a class="page-link text-dark"
                                href="index.php?action=home&act=decrease&page=<?php echo $nextPage ?>">Sau</a></li>
                <?php endif ?>
                </ul>
            </nav>
    <?php } else if (isset($_GET['action']) && $_GET['action'] == 'home' && isset($_GET['act']) && $_GET['act'] == 'ascending') { ?>
                <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-3">
                    <ul class="pagination">
                <?php if ($page > 1): ?>
                            <li class="page-item"><a class="page-link text-dark"
                                    href="index.php?action=home&act=ascending&page=<?php echo $prevPage ?>">Trước</a></li>
                <?php endif; ?>
                <?php for ($i = 1; $i <= $all_page; $i++) { ?>
                            <li class='page-item'><a
                                    class='page-link text-dark <?php echo (isset($_GET['page']) && $_GET['page'] == $i) || (!isset($_GET['page']) && $i == 1) ? 'bg-success' : '' ?>'
                                    href='index.php?action=home&act=ascending&page=<?php echo $i; ?>'><?php echo $i ?></a></li>
                <?php } ?>
                <?php if ($page < $all_page): ?>
                            <li class="page-item"><a class="page-link text-dark"
                                    href="index.php?action=home&act=ascending&page=<?php echo $nextPage ?>">Sau</a></li>
                <?php endif ?>
                    </ul>
                </nav>
    <?php } ?>
</section>

<style>
    .image:hover {
        transform: scale(1.05);
        transition: 0.2s;
    }

    @keyframes chophighlight {
        0% {
            color: white;
            text-shadow: 0 0 5px white;
        }

        50% {
            color: black;
            text-shadow: 0 0 5px black;
        }

        100% {
            color: white;
            text-shadow: 0 0 5px white;
        }
    }

    .chophighlight {
        animation: chophighlight 2s infinite;
    }

    .fw-bolder {
        cursor: pointer;
    }
</style>